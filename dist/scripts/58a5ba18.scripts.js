"use strict";var findDeviceApp=angular.module("findDeviceApp",[]);findDeviceApp.config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("findDeviceApp").controller("MainCtrl",["$scope","$window","geolocation","deviceSettings",function(a,b,c,d){function e(){var a=window.navigator.mozMobileMessage;a.addEventListener("received",function(a){b.alert(a.message)})}e(),c.getCurrentPosition(function(b){a.position=b}),a.wifiStatus=function(){console.log("-------------------------");var a=d.checkWifiStatus();a.then(function(a){console.log("MAIN: Wifi Status: "+a),b.alert("Wifi is currently turned "+a)},function(a){console.log("error getting setting status "+a)})},a.wifiStatusSmart=function(){console.log("-------------------------");var a="wifi.enabled",c=d.checkSettingStatus(a);c.then(function(c){console.log("SETTING : "+a+": "+c),b.alert("SMART Wifi is currently turned "+c)},function(a){console.log("error getting setting status "+a)})},a.activateWifi=function(){console.log("-------------------------");var a="wifi.enabled",c=null;d.checkSettingStatus(a).then(function(e){if(c=e,console.log("AWS - 2. The Promise is: "+e),c)console.log("Status is "+c+", so no need to turn on Wifi");else{console.log("!! PLEASE turn on wifi");var f=d.activateWifi(a);f.then(function(c){console.log("SETTING : "+a+": "+c),b.alert("Wifi is now: "+c)},function(a){console.log("error getting setting status "+a)})}})},a.disableWifi=function(){console.log("-------------------------");var a="wifi.enabled",c=null;d.checkSettingStatus(a).then(function(e){c=e,console.log("DIS - !. The Promise is: "+e),c?(console.log("!!! PLEASE turn on wifi"),d.disableWifi(a).then(function(c){console.log("SETTING : "+a+": "+c),b.alert("Wifi is now: "+c)})):console.log("Status is "+c+", so no need to turn off Wifi")})},a.gpsStatusSmart=function(){console.log("-------------------------");var a="geolocation.enabled",c=d.checkSettingStatus(a);c.then(function(c){console.log("SETTING : "+a+": "+c),b.alert("GPS is currently turned "+c)},function(a){console.log("error getting setting status "+a)})},a.activateGPS=function(){console.log("-------------------------");var a="geolocation.enabled",c=null;d.checkSettingStatus(a).then(function(e){if(c=e,console.log("AGEO - 2. The Promise is: "+e),c)console.log("Status is "+c+", so no need to turn on GPS");else{console.log("!! PLEASE turn on GPS");var f=d.activateGPS(a);f.then(function(c){console.log("SETTING : "+a+": "+c),b.alert("GPS is now: "+c)},function(a){console.log("error getting setting status "+a)})}})},a.disableGPS=function(){console.log("-------------------------");var a="geolocation.enabled",c=null;d.checkSettingStatus(a).then(function(e){c=e,console.log("DGEO - !. The Promise is: "+e),c?(console.log("!!! PLEASE turn off GPS"),d.disableGPS(a).then(function(c){console.log("SETTING : "+a+": "+c),b.alert("GPS is now: "+c)})):console.log("Status is "+c+", so no need to turn off GPS")})}}]),angular.module("findDeviceApp").factory("geolocation",["$rootScope",function(a){return{getCurrentPosition:function(b,c,d){navigator.geolocation.getCurrentPosition(function(){var c=this,d=arguments;b&&a.$apply(function(){b.apply(c,d)})},function(){var b=this,d=arguments;c&&a.$apply(function(){c.apply(b,d)})},d)}}}]),angular.module("findDeviceApp").factory("deviceSettings",["$q","$rootScope","$timeout",function(a,b,c){return{checkWifiStatus:function(){var b=a.defer(),d=navigator.mozSettings.createLock(),e=d.get("wifi.enabled");return e.onsuccess=function(){c(function(){var a=e.result["wifi.enabled"];console.log("Check Wifi Status - wifi.enabled: "+a),b.resolve(a)},500)},e.onerror=function(){console.warn("Check Wifi Status - An error occured: "+e.error),b.reject("Unable to get setting")},b.promise},checkSettingStatus:function(b){var d=a.defer(),e=navigator.mozSettings.createLock(),f=e.get(b);return console.log("Check Status - Just checked the status of: "+b),f.onsuccess=function(){c(function(){var a=f.result[b];console.log("Check Status - "+b+": "+a),d.resolve(a)},500)},f.onerror=function(){console.warn("Check Status - An error occured: "+f.error),d.reject("Unable to get setting")},d.promise},activateWifi:function(b){console.log("AWS - 3. ACTION to turn on "+b);var d=a.defer(),e=navigator.mozSettings.createLock(),f=e.set({"wifi.enabled":!0});return f.onsuccess=function(){c(function(){console.log("AWS - 4. Wifi has been turned on"),d.resolve(!0)},500)},f.onerror=function(){console.log("AWS - 4. An error occured, the Wifi has not been turned on"),d.reject("Unable to get setting")},console.log("AWS - 5 - Return"),d.promise},disableWifi:function(b){console.log("DIS - 3. ACTION to turn off "+b);var d=a.defer(),e=navigator.mozSettings.createLock(),f=e.set({"wifi.enabled":!1});return f.onsuccess=function(){c(function(){d.resolve(!1),console.log("DIS - 4. Wifi has been turned off")},500)},f.onerror=function(){console.log("DIS - 4. An error occured, the Wifi has not been turned on"),d.reject("Unable to get setting")},console.log("DIS - 5 - Return"),d.promise},activateGPS:function(b){console.log("A-GEO - 3. ACTION to turn on "+b);var d=a.defer(),e=navigator.mozSettings.createLock(),f=e.set({"geolocation.enabled":!0});return f.onsuccess=function(){c(function(){console.log("A-GEO - 4. GPS has been turned on"),d.resolve(!0)},500)},f.onerror=function(){console.log("A-GEO - 4. An error occured, the GPS has not been turned on"),d.reject("Unable to get setting")},console.log("A-GEO - 5 - Return"),d.promise},disableGPS:function(b){console.log("D-GEO - 3. ACTION to turn off "+b);var d=a.defer(),e=navigator.mozSettings.createLock(),f=e.set({"geolocation.enabled":!1});return f.onsuccess=function(){c(function(){d.resolve(!1),console.log("D-GEO - 4. GPS has been turned off")},500)},f.onerror=function(){console.log("D-GEO - 4. An error occured, the GPS has not been turned on"),d.reject("Unable to get setting")},console.log("D-GEO - 5 - Return"),d.promise}}}]);